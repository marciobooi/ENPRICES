<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- To be IE compliant -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <link rel="icon" type="image/svg+xml" href="/ENPRICES/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Energy prices - Eurostat</title>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Highcharts (required for webtools charts) -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    
    <!-- ECL CSS from CDN (as per ECL documentation) -->
    <link
      rel="stylesheet"
      href="https://cdn1.fpfis.tech.ec.europa.eu/ecl/v2.39.0/ec-preset-website/styles/ecl-ec-preset-website.css"
      integrity="sha256-5gtjJdzhQj/6dDgp8U5pEU79zmJt3tOZXtU9KGiPckM= sha384-ERo8XH/B7LiOKgppaZUgZcAXFYmnG9YmFGVXJL8GLRmrIdRJ+25EyMgqQlAHX7tk sha512-iml+ef18jNra9w1C9uT45dQEcC2Mjun2X4Em88F/sA6hpktGuvb5Rug/cQK/uQFACW3gxo4dZMOgFjov7i44qA=="
      crossorigin="anonymous"
      media="screen"
    />
    <link
      rel="stylesheet"
      href="https://cdn1.fpfis.tech.ec.europa.eu/ecl/v2.39.0/ec-preset-website/styles/ecl-ec-preset-website-print.css"
      integrity="sha256-7W96/0QE9AYUoYHTTeRjEtpBeZxKRaCmS31d09tjUZU= sha384-PTC+d8Xi3nX1JSOnLJWXDUtz2KAwWMMIbZsuKHPNJn6CY8O41ATk2FYOJde+sU7q sha512-W1yLeUjXwua1SJbEmqPWhfsZ4uYfZKEQM2Q3b2K7ekhWyJtjjdrAYxTEUpCYE3zw2VE52RutTQeOtX7c+IwIVA=="
      crossorigin="anonymous"
      media="print"
    />
    <!-- Webtools Smart Loader (dynamic) -->
    <!--
      We load the webtools loader dynamically so we can detect when it fails (403 on GitHub Pages)
      and show a clear diagnostics banner. The Webtools service often restricts allowed
      referers/origins; if load.js is blocked by webtools the UEC charting services won't be
      available on the live GitHub Pages site. If you see the banner below on the deployed site
      please ask the Eurostat / webtools team to whitelist the GitHub Pages domain or provide
      an alternative way to serve the chart service.
    -->
    <script>
      (function() {
        // Use the correct protocol-relative URL as per ECL documentation
        var wtSrc = '//europa.eu/webtools/load.js';
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = wtSrc;

        s.onload = function() {
          console.info('[Webtools] load.js loaded successfully from', wtSrc);
          try { 
            if (typeof $wt === 'function') { 
              console.info('[Webtools] $wt available, calling initialization');
              $wt(); // Initialize webtools services
            }
          } catch(e) {
            console.warn('[Webtools] Error calling $wt():', e);
          }
          
          // Check for UEC availability after webtools loads
          setTimeout(function() {
            if (typeof window.UEC !== 'undefined' && typeof window.UEC.charts === 'function') {
              console.info('[Webtools] UEC.charts is available and ready');
              // Make UEC globally available for chart rendering
              window.UEC = window.UEC;
            } else {
              console.warn('[Webtools] UEC.charts not found on window after webtools loaded - chart service may not be initialized');
              if (typeof window.UEC !== 'undefined') {
                console.log('[Webtools] UEC object exists but no charts method:', Object.keys(window.UEC));
              }
            }
          }, 3000); // Increased timeout to allow for chart service loading
        };

        s.onerror = function(ev) {
          console.error('[Webtools] Failed to load load.js from', wtSrc, ev);

          // Create a visible banner to inform the user / site administrators
          try {
            var banner = document.createElement('div');
            banner.setAttribute('role', 'alert');
            banner.style.background = '#fff3cd';
            banner.style.color = '#856404';
            banner.style.border = '1px solid #ffeeba';
            banner.style.padding = '10px 14px';
            banner.style.fontFamily = 'Arial, sans-serif';
            banner.style.fontSize = '14px';
            banner.style.textAlign = 'center';
            banner.style.zIndex = 99999;
            banner.textContent = 'Webtools (UEC) failed to load from europa.eu. Charts may not render on this hosted site (403).\nPlease ask the webtools team to whitelist your GitHub Pages domain or host the UEC scripts locally.';
            if (document.body && document.body.firstChild) {
              document.body.insertBefore(banner, document.body.firstChild);
            } else if (document.body) {
              document.body.appendChild(banner);
            }
          } catch (e) {
            // ignore banner errors
          }

          // Add a console hint to help debugging
          console.warn('[Webtools] If you are deploying to GitHub Pages, webtools may block load.js (403).\n' +
            'Recommended actions:\n' +
            '  - Contact webtools to whitelist the domain (e.g. https://<your-user>.github.io or https://<org>.github.io).\n' +
            '  - As a temporary workaround host the required UEC chart scripts locally (check licensing),\n' +
            '    or implement a fallback chart renderer such as Highcharts/Chart.js until webtools access is granted.');
        };

        document.head.appendChild(s);
      })();
    </script>
  </head>
  <body>
    <!-- Eurostat Webtools - Cookie Consent Kit -->
    <script type="application/json">
    {
      "service": "cck",
      "lang": "en",
      "url": {
        "en": "https://ec.europa.eu/info/privacy-policy/cookies_en",
        "fr": "https://ec.europa.eu/info/privacy-policy/cookies_fr", 
        "de": "https://ec.europa.eu/info/privacy-policy/cookies_de"
      }
    }
    </script>
    
    <!-- Eurostat Webtools - Globan (Global Banner) -->
    <script type="application/json">
    {
      "service": "globan",
      "lang": "en",
      "theme": "dark"
    }
    </script>

    <!-- Eurostat Webtools - UEC Charts DISABLED -->
    <!--
    <script type="application/json">
    {
      "service": "chart",
      "version": "2.0",
      "lang": "en"
    }
    </script>
    -->

    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
        
    <!-- ECL JavaScript from CDN (as per ECL documentation) -->
    <script
      src="https://cdn1.fpfis.tech.ec.europa.eu/ecl/v2.39.0/ec-preset-website/scripts/ecl-ec-preset-website.js"
      integrity="sha256-yUbijtAjATuk84ne0cK5+XpesZtkSngBLvavTNYCu7s= sha384-ML+E8uznb01P2wSN1AMxHR8q0v/9ss9Yn7iOeZgauX3PYq7GUsicWPcklXXMI+jn sha512-vdpwGmw8qnh7tmdZn0BFOJvoDNDyA6n+UNE4j2EGR2EmyOVJrGsuux4tMF0xWUiv4bdpbdSBuq5Mz+a+t8D7Kg=="
      crossorigin="anonymous"
    ></script>
    <script>
      // Initialize ECL components automatically (as per ECL documentation)
      if (typeof ECL !== 'undefined' && ECL.autoInit) {
        ECL.autoInit();
        console.info('[ECL] Auto-initialized successfully');
      } else {
        console.warn('[ECL] ECL not available or autoInit not found');
      }
    </script>
  </body>
</html>
